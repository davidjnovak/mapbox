<!DOCTYPE html>
<html>
<head>
    <title>Wavy</title>
    <meta charset="utf-8" />
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>
    <div id='map'></div>
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.js'></script>
    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoiZGF2ZXlub3YiLCJhIjoiY2xrajh3ZXVhMDJyazNlbnRuYWZmZWwzaSJ9.hh5Hk6_pBV84NEUVNPvMXQ';
        var map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v11',
            center: [-77.7983, 34.2087], // Wrightsville Beach, NC
            zoom: 12
        });

        map.on('load', function () {
            // Hardcoded addresses
            var addresses = [
                { name: 'some more bullshit', isActive: 'true', lat:34.199719207021865, lng:-77.80212226925718 },
                { name: 'some bullshit', isActive: 'false', lat:34.20221167793872, lng:-77.79992233293612 },
                { name: 'davids house lol', isActive: 'true', lat:34.22035464520646, lng:-77.79015823190046 },

                // Add more addresses as needed
            ];

            // Add a source and layer for the addresses
            map.addSource('addresses', {
                'type': 'geojson',
                'data': {
                    'type': 'FeatureCollection',
                    'features': addresses.map(function (address) {
                        return {
                            'type': 'Feature',
                            'geometry': {
                                'type': 'Point',
                                'coordinates': [address.lng, address.lat]
                            },
                            'properties': {
                                'name': address.name,
                                'isActive': address.isActive
                            }
                        };
                    })
                }
            });
            map.addLayer({
                'id': 'addresses',
                'type': 'circle',
                'source': 'addresses',
                'paint': {
                    'circle-radius': 10,
                    'circle-color': ['match', ['get', 'isActive'], 'true', 'blue', 'false', 'red', 'black']
                }
            });

            // Show a popup when an address marker is clicked
            map.on('click', 'addresses', function (e) {
                new mapboxgl.Popup()
                    .setLngLat(e.features[0].geometry.coordinates)
                    .setHTML(`<h3>${e.features[0].properties.name}</h3><p>Active: ${e.features[0].properties.isActive === 'true' ? 'Yes' : 'No'}</p>`)
                    .addTo(map);
            });
        });
    </script>
</body>
</html>
